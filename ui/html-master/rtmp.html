{^define LAYOUT layout.html}
{^define TITLE}
{#RTMP Server} - {#PeerCast on} {^SERVER_NAME}
{^end}

<div style="width: 500px">
  <form action=/admin method=get>
    <input type=hidden value="control_rtmp" name=cmd>

    <table class="table-panel" width="100%" border=0>
      <tr>
        <td colspan="2"><div align="center"><b>{#RTMP Server}</b></div></td>
      </tr>
      <tr>
        <th style="width: 8em">{#Status}</th>
        <td>{$servMgr.rtmpServerMonitor.status}</td>
      </tr>
      <tr>
        <th>{#Process ID}</th>
        <td>
          {@if servMgr.rtmpServerMonitor.processID == "-1"}
            n/a
          {@else}
            {$servMgr.rtmpServerMonitor.processID}
          {@end}
        </td>
      </tr>
      {@if servMgr.rtmpServerMonitor.status == "UP"}
      <tr>
        <th>{#URL} 1</th>
        <td>
          <code>rtmp://localhost{@if servMgr.rtmpPort != "1935"}:{$servMgr.rtmpPort}{@end}/</code>
        </td>
      </tr>
      <tr>
        <th>{#URL} 2</th>
        <td>
          <code>rtmp://{$servMgr.serverIP}{@if servMgr.rtmpPort != "1935"}:{$servMgr.rtmpPort}{@end}/</code>
        </td>
      </tr>
      {@end}
      <tr>
        <th>{#Port}</th>
        <td>
          {@if servMgr.rtmpServerMonitor.status == "DOWN"}
            <input type="number" name="port" value="1935" min="1" max="65535" style="width: 100%">
          {@else}
            <input type="number" name="port" value="1935" min="1" max="65535" style="width: 100%" disabled>
          {@end}
        </td>
      </tr>
      <tr align="center">
        <td colspan=2 style="padding: 5px">
          {@if servMgr.rtmpServerMonitor.status == "DOWN"}
            <button type=submit value="start" name=action>{#Start}</button>
            <button type=submit value="stop" name=action disabled>{#Stop}</button>
          {@else}
            <button type=submit value="start" name=action disabled>{#Start}</button>
            <button type=submit value="stop" name=action>{#Stop}</button>
          {@end}
        </td>
      </tr>
    </table>

    <table class="table-panel" width="100%" border=0>
      <tr>
        <td colspan="2"><div align="center"><b>{#Channel Information}</b></div></td>
      </tr>
      <tr>
        <th style="width: 8em">{#Name}</th>
        <td>
          <input type="text" name="name" value="{$servMgr.defaultChannelInfo.name}" style="width: 100%" required
                 {@if servMgr.rtmpServerMonitor.status == "UP"}disabled{@end}>
        </td>
      </tr>
      <tr>
        <th>{#Genre}</th>
        <td>
          <input type="text" name="genre" value="{$servMgr.defaultChannelInfo.genre}" style="width: 100%"
                 {@if servMgr.rtmpServerMonitor.status == "UP"}disabled{@end}>
        </td>
      </tr>
      <tr>
        <th>{#Desc.}</th>
        <td>
          <input type="text" name="desc" value="{$servMgr.defaultChannelInfo.desc}" style="width: 100%"
                 {@if servMgr.rtmpServerMonitor.status == "UP"}disabled{@end}>
        </td>
      </tr>
      <tr>
        <th>{#URL}</th>
        <td>
          <input type="url" name="url" value="{$servMgr.defaultChannelInfo.url}" style="width: 100%"
                 {@if servMgr.rtmpServerMonitor.status == "UP"}disabled{@end}>
        </td>
      </tr>
      <tr>
        <th>{#Comment}</th>
        <td>
          <input type="text" name="comment" value="{$servMgr.defaultChannelInfo.comment}" style="width: 100%"
                 {@if servMgr.rtmpServerMonitor.status == "UP"}disabled{@end}>
        </td>
      </tr>
    </table>
  </form>
</div>
